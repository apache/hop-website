<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Docker container :: Apache Hop</title> <link rel="canonical" href="https://hop.apache.org/tech-manual/latest/docker-container.html"> <meta name="description" content="Apache Hop provides a Docker image for long (Hop Server) and short-lived (hop-run) containers. An additional image is available for Hop Web. Both images are available on Docker Hub."> <meta name="generator" content="Antora 3.0.1"> <link rel="stylesheet" href="../../_/css/site-e3cda5e4ab.css"> <meta property="og:title" content="Docker container :: Apache Hop"> <meta property="og:description" content="Apache Hop provides a Docker image for long (Hop Server) and short-lived (hop-run) containers. An additional image is available for Hop Web. Both images are available on Docker Hub."> <meta property="og:type" content="article"> <meta property="og:url" content="https://hop.apache.org/tech-manual/latest/docker-container.html"> <meta property="og:image" content="https://hop.apache.org/img/hop-logo.png"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Hop</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item mobile-heading" href="/../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link mobile-heading" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../manual/latest/getting-started/">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../tech-manual/latest/">Technical Documentation</a> <a class="navbar-item" href="../../dev-manual/latest/">Developer Documentation</a> <a class="navbar-item" href="../../docs/architecture/">Architecture</a> <a class="navbar-item" href="../../docs/roadmap/">Roadmap</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link mobile-heading" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/contributing/">Contributing</a> <a class="navbar-item" href="../../community/tools/">Tools</a> <a class="navbar-item" href="../../community/mailing-list/">Mailing Lists</a> <a class="navbar-item" href="../../community/events/">Events and User Groups</a> <a class="navbar-item" href="../../community/team/">Team</a> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="../../community/ethos/">Ethos</a> </div> </div> <a class="navbar-item mobile-heading" href="/../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link mobile-heading" href="#">Apache</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event" target="_blank">Events</a> <a class="navbar-item" href="https://www.apache.org/licenses/" target="_blank">License</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks to our sponsors</a> <a class="navbar-item" href="https://www.apache.org/security/" target="_blank">Apache Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Become a sponsor</a> </div> </div> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-item search hide-for-print"> <div id="search-field" class="field"> <input id="search-input" type="text" placeholder="Search the docs"> </div> </div> <div class="navbar-tools"> <a href="https://twitter.com/ApacheHop" title="Follow us on Twitter" target="_blank"><svg focusable="false" height="30" width="30" viewBox="0 0 30 30" class="brand-icon"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.5 8.778c-.441.196-.916.328-1.414.388.509-.305.898-.787 1.083-1.362-.476.282-1.003.487-1.564.597-.448-.479-1.089-.778-1.796-.778-1.59 0-2.758 1.483-2.399 3.023-2.045-.103-3.86-1.083-5.074-2.572-.645 1.106-.334 2.554.762 3.287-.403-.013-.782-.124-1.114-.308-.027 1.14.791 2.207 1.975 2.445-.346.094-.726.116-1.112.042.313.978 1.224 1.689 2.3 1.709-1.037.812-2.34 1.175-3.647 1.021 1.09.699 2.383 1.106 3.773 1.106 4.572 0 7.154-3.861 6.998-7.324.482-.346.899-.78 1.229-1.274z"/></svg></a> <a href="https://www.linkedin.com/company/apachehop/" title="Follow us on LinkedIn" target="_blank"><svg focusable="false" height="30" width="30" viewBox="0 0 30 30" class="brand-icon"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a> <a href="https://www.youtube.com/channel/UCGlcYslwe03Y2zbZ1W6DAGA" title="Subscribe to our YouTube channel" target="_blank"><svg focusable="false" height="30" width="30" viewBox="0 0 30 30" class="brand-icon"><path fill-rule="evenodd" d="M4.652 0h1.44l.988 3.702.916-3.702h1.454l-1.665 5.505v3.757h-1.431v-3.757l-1.702-5.505zm6.594 2.373c-1.119 0-1.861.74-1.861 1.835v3.349c0 1.204.629 1.831 1.861 1.831 1.022 0 1.826-.683 1.826-1.831v-3.349c0-1.069-.797-1.835-1.826-1.835zm.531 5.127c0 .372-.19.646-.532.646-.351 0-.554-.287-.554-.646v-3.179c0-.374.172-.651.529-.651.39 0 .557.269.557.651v3.179zm4.729-5.07v5.186c-.155.194-.5.512-.747.512-.271 0-.338-.186-.338-.46v-5.238h-1.27v5.71c0 .675.206 1.22.887 1.22.384 0 .918-.2 1.468-.853v.754h1.27v-6.831h-1.27zm2.203 13.858c-.448 0-.541.315-.541.763v.659h1.069v-.66c.001-.44-.092-.762-.528-.762zm-4.703.04c-.084.043-.167.109-.25.198v4.055c.099.106.194.182.287.229.197.1.485.107.619-.067.07-.092.105-.241.105-.449v-3.359c0-.22-.043-.386-.129-.5-.147-.193-.42-.214-.632-.107zm4.827-5.195c-2.604-.177-11.066-.177-13.666 0-2.814.192-3.146 1.892-3.167 6.367.021 4.467.35 6.175 3.167 6.367 2.6.177 11.062.177 13.666 0 2.814-.192 3.146-1.893 3.167-6.367-.021-4.467-.35-6.175-3.167-6.367zm-12.324 10.686h-1.363v-7.54h-1.41v-1.28h4.182v1.28h-1.41v7.54zm4.846 0h-1.21v-.718c-.223.265-.455.467-.696.605-.652.374-1.547.365-1.547-.955v-5.438h1.209v4.988c0 .262.063.438.322.438.236 0 .564-.303.711-.487v-4.939h1.21v6.506zm4.657-1.348c0 .805-.301 1.431-1.106 1.431-.443 0-.812-.162-1.149-.583v.5h-1.221v-8.82h1.221v2.84c.273-.333.644-.608 1.076-.608.886 0 1.18.749 1.18 1.631v3.609zm4.471-1.752h-2.314v1.228c0 .488.042.91.528.91.511 0 .541-.344.541-.91v-.452h1.245v.489c0 1.253-.538 2.013-1.813 2.013-1.155 0-1.746-.842-1.746-2.013v-2.921c0-1.129.746-1.914 1.837-1.914 1.161 0 1.721.738 1.721 1.914v1.656z"></path></svg></a> <a href="https://github.com/apache/hop/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon" viewBox="0 0 22 22"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <div class="nav-container" data-component="tech-manual" data-version="2.8.0"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="index.html">Technical Documentation</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <a class="nav-link" href="getting-started.html">Getting started</a> </li> <li class="nav-item is-current-page" data-depth="1"> <a class="nav-link" href="docker-container.html">Docker container</a> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="hop-vs-kettle/index.html">Kettle/PDI and Hop</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hop-vs-kettle/hop-vs-kettle.html">Hop vs Kettle</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hop-vs-kettle/if-you-know-kettle.html">If you know Kettle</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hop-vs-kettle/import-kettle-projects.html">Upgrade Kettle to Hop</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="logging/logging-architecture.html">Logging Architecture</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="logging/udjc-logging.html">Logging from UDJC</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="logging/logging-plugins.html">Logging Plugin Architecture</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="hop-logo-and-icons.html">Hop logo and icons</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Technical Documentation</span> <span class="version">2.8.0</span> </div> <ul class="components"> <li class="component"> <a class="title" href="../../dev-manual/latest/index.html">Development Documentation</a> <ul class="versions"> <li class="version"> <a href="../../dev-manual/next/index.html">2.16.0</a> </li> <li class="version is-latest"> <a href="../../dev-manual/latest/index.html">2.14.0</a> </li> <li class="version"> <a href="../../dev-manual/2.13.0/index.html">2.13.0</a> </li> <li class="version"> <a href="../../dev-manual/2.12.0/index.html">2.12.0</a> </li> <li class="version"> <a href="../../dev-manual/2.11.0/index.html">2.11.0</a> </li> <li class="version"> <a href="../../dev-manual/2.10.0/index.html">2.10.0</a> </li> <li class="version"> <a href="../../dev-manual/2.9.0/index.html">2.9.0</a> </li> <li class="version"> <a href="../../dev-manual/2.8.0/index.html">2.8.0</a> </li> <li class="version"> <a href="../../dev-manual/2.7.0/index.html">2.7.0</a> </li> <li class="version"> <a href="../../dev-manual/2.6.0/index.html">2.6.0</a> </li> <li class="version"> <a href="../../dev-manual/2.5.0/index.html">2.5.0</a> </li> </ul> </li> <li class="component is-current"> <a class="title" href="../latest/index.html">Technical Documentation</a> <ul class="versions"> <li class="version"> <a href="../next/index.html">2.16.0</a> </li> <li class="version is-latest"> <a href="../latest/index.html">2.14.0</a> </li> <li class="version"> <a href="../2.13.0/index.html">2.13.0</a> </li> <li class="version"> <a href="../2.12.0/index.html">2.12.0</a> </li> <li class="version"> <a href="../2.11.0/index.html">2.11.0</a> </li> <li class="version"> <a href="../2.10.0/index.html">2.10.0</a> </li> <li class="version"> <a href="../2.9.0/index.html">2.9.0</a> </li> <li class="version is-current"> <a href="index.html">2.8.0</a> </li> <li class="version"> <a href="../2.7.0/index.html">2.7.0</a> </li> <li class="version"> <a href="../2.6.0/index.html">2.6.0</a> </li> <li class="version"> <a href="../2.5.0/index.html">2.5.0</a> </li> </ul> </li> <li class="component"> <a class="title" href="../../manual/latest/index.html">User manual</a> <ul class="versions"> <li class="version"> <a href="../../manual/next/index.html">2.16.0 (pre-release)</a> </li> <li class="version is-latest"> <a href="../../manual/latest/index.html">2.14.0</a> </li> <li class="version"> <a href="../../manual/2.13.0/index.html">2.13.0</a> </li> <li class="version"> <a href="../../manual/2.12.0/index.html">2.12.0</a> </li> <li class="version"> <a href="../../manual/2.11.0/index.html">2.11.0</a> </li> <li class="version"> <a href="../../manual/2.10.0/index.html">2.10.0</a> </li> <li class="version"> <a href="../../manual/2.9.0/index.html">2.9.0</a> </li> <li class="version"> <a href="../../manual/2.8.0/index.html">2.8.0</a> </li> <li class="version"> <a href="../../manual/2.7.0/index.html">2.7.0</a> </li> <li class="version"> <a href="../../manual/2.6.0/index.html">2.6.0</a> </li> <li class="version"> <a href="../../manual/2.5.0/index.html">2.5.0</a> </li> <li class="version"> <a href="../../manual/2.4.0/index.html">2.4.0</a> </li> <li class="version"> <a href="../../manual/2.3.0/index.html">2.3.0</a> </li> <li class="version"> <a href="../../manual/2.2.0/index.html">2.2.0</a> </li> <li class="version"> <a href="../../manual/2.1.0/index.html">2.1.0</a> </li> <li class="version"> <a href="../../manual/2.0.0/index.html">2.0.0</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main class="article"> <nav class="toolbar"> <button class="nav-toggle"></button> <a href="../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">Technical Documentation</a></li> <li><a href="docker-container.html">Docker container</a></li> </ul> </nav> <div class="page-versions"> <button class="version-menu-toggle" title="Show other versions of page">2.8.0</button> <div class="version-menu"> <a class="version" href="../next/docker-container.html">2.16.0</a> <a class="version" href="../latest/docker-container.html">2.14.0</a> <a class="version" href="../2.13.0/docker-container.html">2.13.0</a> <a class="version" href="../2.12.0/docker-container.html">2.12.0</a> <a class="version" href="../2.11.0/docker-container.html">2.11.0</a> <a class="version" href="../2.10.0/docker-container.html">2.10.0</a> <a class="version" href="../2.9.0/docker-container.html">2.9.0</a> <a class="version is-current" href="docker-container.html">2.8.0</a> <a class="version" href="../2.7.0/docker-container.html">2.7.0</a> <a class="version" href="../2.6.0/docker-container.html">2.6.0</a> <a class="version" href="../2.5.0/docker-container.html">2.5.0</a> </div> </div> <div class="edit-this-page"><a href="https://github.com/apache/hop/edit/release/2.8.0/docs/hop-tech-manual/modules/ROOT/pages/docker-container.adoc">Edit this Page</a></div> </nav> <div class="content"> <aside class="toc sidebar" data-title="Contents" data-levels="2"> <div class="toc-menu"></div> </aside> <article class="doc"> <h1 class="page">Docker container</h1> <div class="sect1"> <h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2> <div class="sectionbody"> <div class="paragraph"> <p>This is the documentation of the official Apache Hop docker container published on:</p> </div> <div class="paragraph"> <p><a href="https://hub.docker.com/r/apache/hop" class="bare">https://hub.docker.com/r/apache/hop</a></p> </div> <div class="paragraph"> <p>It&#8217;s a <strong>Hop Docker image</strong> supporting both <strong>short-lived</strong> and <strong>long-lived</strong> setups. A short-lived setup executes a pipeline or workflow and stops right after. A long-lived setup starts a Hop server and waits for work.</p> </div> </div> </div> <div class="sect1"> <h2 id="_operating_system"><a class="anchor" href="#_operating_system"></a>Operating system</h2> <div class="sectionbody"> <div class="paragraph"> <p>The docker container runs a minimal Linux system called <a href="https://hub.docker.com/_/alpine">Alpine</a>. OpenJDK version 11 is then used to execute Apache Hop. The Linux user used to execute in the container is <code>hop</code> and the group is <code>hop</code> as well.</p> </div> </div> </div> <div class="sect1"> <h2 id="_container_folder_structure"><a class="anchor" href="#_container_folder_structure"></a>Container Folder Structure</h2> <div class="sectionbody"> <table class="tableblock frame-all grid-all stretch"> <colgroup> <col style="width: 50%;"> <col style="width: 50%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Folder</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>/opt/hop</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The installation location of the hop client package.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>/files</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">This volume has read-write permissions for Linux user <code>hop</code>. You can use it for example to mount a folder that contains the <strong>hop and project config</strong> as well as the <strong>workflows and pipelines</strong>.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>/home/hop</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The initial working directory location of the docker container.</p></td> </tr> </tbody> </table> </div> </div> <div class="sect1"> <h2 id="_environment_variables"><a class="anchor" href="#_environment_variables"></a>Environment Variables</h2> <div class="sectionbody"> <div class="paragraph"> <p>You can provide values for the following environment variables:</p> </div> <table class="tableblock frame-all grid-all stretch"> <colgroup> <col style="width: 33.3333%;"> <col style="width: 33.3333%;"> <col style="width: 33.3334%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Environment Variable</th> <th class="tableblock halign-left valign-top">Default</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_LOG_LEVEL</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Basic</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The log level. Use one of: <code>None</code>, <code>Error</code>, <code>Minimal</code>, <code>Basic</code>, <code>Detailed</code>, <code>Debug</code> or <code>Rowlevel</code>.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_LOG_PATH</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>/opt/hop/hop.err.log</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The file path to the Hop log file.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_PROJECT_NAME</code></code></p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Hop project to create in the container. You also need to specify the <code><code>HOP_PROJECT_FOLDER</code></code> variable. If you do not set this variable, no project or environment will be created.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_PROJECT_FOLDER</code></code></p> <p class="tableblock"><code>HOP_PROJECT_DIRECTORY</code> (Deprecated)</p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Path to the home of the Hop project.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_PROJECT_CONFIG_FILE_NAME</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>project-config.json</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Name of the project config file.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_ENVIRONMENT_NAME</code></code></p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Hop environment to create in the container. If you do not set this variable, no environment will be created. When using an environment a project has to be created too</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_ENVIRONMENT_CONFIG_FILE_NAME_PATHS</code></code></p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">This is a comma separated list of paths to environment config files (including filename and file extension).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_OPTIONS</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>-XX:+AggressiveHeap</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Any JRE options you want to set. The <code>-XX:+AggressiveHeap</code> option tells the container to use all memory assigned to it.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SHARED_JDBC_FOLDERS</code></code></p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list to locations where JDBC drivers live (default is /lib/jdbc).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_CUSTOM_ENTRYPOINT_EXTENSION_SHELL_FILE_PATH</code></code></p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Optional path to a custom entrypoint extension script file. You can use this for example to fetch Hop project files from S3 or gitlab.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SYSTEM_PROPERTIES</code></code></p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The system properties that should be set during execution. You can specify the properties as a comma separated list, e.g. <code>PROP1=xxx,PROP2=yyy</code></p></td> </tr> </tbody> </table> <div class="paragraph"> <p>Here are the variables for <strong>short-lived</strong> containers, to execute a workflow or pipeline:</p> </div> <table class="tableblock frame-all grid-all stretch"> <colgroup> <col style="width: 33.3333%;"> <col style="width: 33.3333%;"> <col style="width: 33.3334%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Environment Variable</th> <th class="tableblock halign-left valign-top">Required</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_FILE_PATH</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The path to the Hop workflow or pipeline to execute. If you configured a project you can use a relative path to the project home folder.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_RUN_CONFIG</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Hop run configuration to use to execute your pipeline or workflow.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_RUN_PARAMETERS</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Optionally, you can specify the parameters that should be passed to the pipeline or workflow you are executing. You can specify them as a comma separated list, e.g. <code><code>PARAM_1=aaa,PARAM_2=bbb</code></code>.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_RUN_METADATA_EXPORT</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">You can specify a metadata export file here which will contain all required metadata elements. See also the metadata export option in the Hop Conf tool.</p></td> </tr> </tbody> </table> <div class="paragraph"> <p>Below are the variables you can use for a <strong>long-lived</strong> container, running Hop Server:</p> </div> <table class="tableblock frame-all grid-all stretch"> <colgroup> <col style="width: 33.3333%;"> <col style="width: 33.3333%;"> <col style="width: 33.3334%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Environment Variable</th> <th class="tableblock halign-left valign-top">Default value</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_HOSTNAME</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.0.0.0</code> (listen to anything)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The IP address the server will listen to.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_PORT</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>8080</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The port the server will listen to.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_SHUTDOWNPORT</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>8079</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The port the server shutdown listener will listen to.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_USER</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>cluster</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The username to log into the Hop server.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_PASS</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>cluster</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The password to log into the Hop server</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_METADATA_FOLDER</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">(optional)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">You can point to a folder containing metadata JSON files which are then available to the server.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_MAX_LOG_LINES</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> (keep all logging in memory)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of log lines kept in memory by the server.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_MAX_LOG_TIMEOUT</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> (never clean up log lines)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The time (in minutes) it takes for a log line to be cleaned up in memory.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_MAX_OBJECT_TIMEOUT</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>1440</code> (a day)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The time (in minutes) it takes for a pipeline or workflow execution to be removed from the server status.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_KEYSTORE</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">(optional)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The path to the Java keystore file you want to use to run the Hop server with SSL enabled to support https.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_KEYSTORE_PASSWORD</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">(optional)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The password of the Java keystore file you want to use to run the Hop server with SSL enabled to support https</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>HOP_SERVER_KEY_PASSWORD</code></code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">(optional)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The password of the key if you want to use to run the Hop server with SSL enabled. If both passwords are the same you can omit setting this variable.</p></td> </tr> </tbody> </table> </div> </div> <div class="sect1"> <h2 id="_updating_the_hop_docker_container_image"><a class="anchor" href="#_updating_the_hop_docker_container_image"></a>Updating the Hop docker container image</h2> <div class="sectionbody"> <div class="paragraph"> <p>Make sure to get the latest updates for the Hop image by pulling them:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker pull apache/hop:&lt;tag&gt;</code></pre> </div> </div> <div class="paragraph"> <p>If you do not specify a value for <code>:&lt;tag&gt;</code> the value <code>latest</code> will be taken. Latest will contain the last officially released version of Apache Hop. You can also specify <code>Development</code> as a tag. That image will contain the last built Development snapshot of Apache Hop. rxq7777</p> </div> </div> </div> <div class="sect1"> <h2 id="_how_to_run_the_container"><a class="anchor" href="#_how_to_run_the_container"></a>How to run the Container</h2> <div class="sectionbody"> <div class="paragraph"> <p>The most common use case will be that you run a <strong>short-lived container</strong> to just complete one Hop workflow or pipeline.</p> </div> <div class="paragraph"> <p>The first example below runs the sample <code>switch-case-basic.hpl</code> <strong>pipeline</strong> from the samples project.</p> </div> <div class="paragraph"> <p>Replace <code>&lt;tag&gt;</code> with <code>latest</code>, <code>Development</code> or a release tag, and replace <code>&lt;HOP_SAMPLE_PROJECT_PATH&gt;</code> with the path to the <code>config/projects/samples</code> folder in your Hop installation to mount that folder as a volume. This will make the samples project folder available as the <code>/files</code> folder in the container.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -it --rm \
  --env HOP_LOG_LEVEL=Basic \
  --env HOP_FILE_PATH='${PROJECT_HOME}/transforms/switch-case-basic.hpl' \
  --env HOP_PROJECT_FOLDER=/files \
  --env HOP_PROJECT_NAME=samples \
  --env HOP_RUN_CONFIG=local \
  --name hop-test-container \
  -v &lt;HOP_SAMPLE_PROJECT_PATH&gt;:/files \
  apache/hop:&lt;tag&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The second example below runs a <strong>workflow</strong>.</p> </div> <div class="paragraph"> <p>In addition to the most basic example below, this example adds the environment, based on <code>HOP_ENVIRONMENT_NAME</code>, <code>HOP_ENVIRONMENT_CONFIG_FILE_NAME_PATHS</code> and run parameters with <code>HOP_RUN_PARAMETERS</code></p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -it --rm \
  --env HOP_LOG_LEVEL=Basic \
  --env HOP_FILE_PATH='${PROJECT_HOME}/pipelines-and-workflows/main.hwf' \
  --env HOP_PROJECT_FOLDER=/files/project \
  --env HOP_PROJECT_NAME=project-a \
  --env HOP_ENVIRONMENT_NAME=project-a-test \
  --env HOP_ENVIRONMENT_CONFIG_FILE_NAME_PATHS=/files/config/project-a-test.json \
  --env HOP_RUN_CONFIG=local \
  --env HOP_RUN_PARAMETERS=PARAM_LOG_MESSAGE=Hello,PARAM_WAIT_FOR_X_MINUTES=1 \
  -v /path/to/local/dir:/files \
  --name my-simple-hop-container \
  apache/hop:&lt;tag&gt;</code></pre> </div> </div> <div class="paragraph"> <p>If you need a <strong>long-lived container</strong>, this option is also available.</p> </div> <div class="paragraph"> <p>For more information on the long-lived container please also see the <a href="../../manual/latest/hop-server/index.html" class="xref page">Hop Server</a> documentation as it describes what can be done using the Hop Server</p> </div> <div class="paragraph"> <p>Run this command to start a Hop Server in a docker container:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -it --rm \
  --env HOP_SERVER_USER=admin \
  --env HOP_SERVER_PASS=admin \
  --env HOP_SERVER_SHUTDOWNPORT=8080 \
  --env HOP_SERVER_PORT=8181 \
  --env HOP_SERVER_PORT=8180 \
  --env HOP_SERVER_HOSTNAME=0.0.0.0 \
  -p 8080:8080 \
  -p 8181:8181 \
  -p 8180:8180 \
  --name my-hop-server-container \
 apache/hop:&lt;tag&gt;</code></pre> </div> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> <code>localhost</code> is a loopback to your machine, which may be the container but not the host (your laptop or server where your run the container). Use <code>0.0.0.0</code> instead to listen on all available interfaces. </td> </tr> </table> </div> <div class="paragraph"> <p>Hop Server is designed to receive all variables and metadata from executing clients. This means it needs little to no configuration to run.</p> </div> <div class="paragraph"> <p>If you want to use the web-services functionality additional information on how to configure your webserver can be found on the user manual <a href="../../manual/latest/hop-server/web-service.html" class="xref page">Web Service</a> page. For this to work properly the <code>HOP_SERVER_METADATA_FOLDER</code> variable has to be set too.</p> </div> <div class="paragraph"> <p>When started can then access the hop-server UI from your host at <code><a href="http://0.0.0.0:8181" class="bare">http://0.0.0.0:8181</a></code> or <code><a href="http://localhost:8181" class="bare">http://localhost:8181</a></code></p> </div> </div> </div> <div class="sect1"> <h2 id="_custom_entrypoint_extension_shell_script"><a class="anchor" href="#_custom_entrypoint_extension_shell_script"></a>Custom Entrypoint Extension Shell Script</h2> <div class="sectionbody"> <div class="paragraph"> <p>To make the Hop Docker image even more flexible, we added a <code><code>HOP_CUSTOM_ENTRYPOINT_EXTENSION_SHELL_FILE_PATH</code></code> variable that accepts a path to a custom shell script (that you provide).This shell script will run when you start the container before your Hop project is registered with the container&#8217;s Hop config and before your Hop workflow or pipeline gets kicked off. This feature might come in handy when you want to run some custom logic upfront, e.g. source Hop project files from S3 or clone them from GitHub.</p> </div> <div class="paragraph"> <p>The custom shell file can be provided in several ways (this is not a full list):</p> </div> <div class="ulist"> <ul> <li> <p>via the mount point (<code><code>/files</code></code>)</p> </li> <li> <p>You create your own Dockerfile, define this image as the base and then use the <code><code>COPY</code></code> instruction to copy your custom shell file in your Docker image.</p> </li> </ul> </div> <div class="paragraph"> <p>For the last scenario mentioned, it could be something like this:</p> </div> <div class="paragraph"> <p>We create a simple <strong>bash script</strong> called <code><code>clone-git-repo.sh</code></code> in a sub-folder called <code><code>resources</code></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">#!/bin/bash
cd /home/hop
git clone ${GIT_REPO_URI}
chown -R hop:hop /home/hop/${GIT_REPO_NAME}</code></pre> </div> </div> <div class="paragraph"> <p>We also make it parameter-driven, so it any other team can use it.We create our custom Dockerfile like so:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-dockerfile hljs" data-lang="dockerfile">FROM apache/hop:Development
ENV GIT_REPO_URI=https://...
# example value: https://github.com/diethardsteiner/apache-hop-minimal-project.git
ENV GIT_REPO_NAME=repo-name
# example value: apache-hop-minimal-project
USER root
RUN apk update \
  &amp;&amp; apk add --no-cache git
# copy custom entrypoint extension shell script
COPY --chown=hop:hop ./resources/clone-git-repo.sh /home/hop/clone-git-repo.sh
USER hop</code></pre> </div> </div> <div class="paragraph"> <p>Note that apart from defining the new environment variables (that go in line with the parameters we defined in the <code><code>clone-git-repo.sh</code></code> earlier on ), we also <code><code>COPY</code></code> the <code><code>clone-git-repo.sh</code></code> file to user hop&#8217;s home folder.</p> </div> <div class="paragraph"> <p>Next let&#8217;s build a small script which builds our custom image and then tests it by spinning up a container and running a workflow:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">#!/bin/zsh

DOCKER_IMG_CHECK=$(docker images | grep ds/custom-hop)

if [ ! -z "${DOCKER_IMG_CHECK}" ]; then
  echo "removing existing ds/custom-hop image"
  docker rmi ds/custom-hop:latest
fi

docker build . -f custom.Dockerfile -t ds/custom-hop:latest

echo " ==== TESTING ====="


HOP_DOCKER_IMAGE=ds/custom-hop:latest
PROJECT_DEPLOYMENT_DIR=/home/hop/apache-hop-minimal-project

docker run -it --rm \
  --env HOP_LOG_LEVEL=Basic \
  --env HOP_FILE_PATH='${PROJECT_HOME}/main.hwf' \
  --env HOP_PROJECT_FOLDER=${PROJECT_DEPLOYMENT_DIR} \
  --env HOP_PROJECT_NAME=apache-hop-minimum-project \
  --env HOP_ENVIRONMENT_NAME=dev \
  --env HOP_ENVIRONMENT_CONFIG_FILE_NAME_PATHS=${PROJECT_DEPLOYMENT_DIR}/dev-config.json \
  --env HOP_RUN_CONFIG=local \
  --env HOP_CUSTOM_ENTRYPOINT_EXTENSION_SHELL_FILE_PATH=/home/hop/clone-git-repo.sh \
  --env GIT_REPO_URI=https://github.com/diethardsteiner/apache-hop-minimal-project.git \
  --env GIT_REPO_NAME=apache-hop-minimal-project \
  --name my-simple-hop-container \
  ${HOP_DOCKER_IMAGE}</code></pre> </div> </div> </div> </div> </article> </div> </main> </div> <footer> <div class="footer"> <dl> <dt>Overview</dt> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../manual/latest/">Getting started</a></dd> </dl> <dl> <dt>Community</dt> <dd><a target="_blank" href="https://github.com/apache/hop/issues">GitHub Issues</a></dd> <dd><a target="_blank" href="https://github.com/apache/hop/discussions">GitHub Discussions</a></dd> <dd><a target="_blank" href="../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> </dl> <p> &copy; 2019-2025 The Hop Team.<br> All marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/site-8bbb7a5250.js"></script> <script async src="../../_/js/vendor/highlight-a243a7d07e.js"></script> <script async src="../../_/js/vendor/tabs-523d9bca0f.js"></script> <script src="../../_/js/vendor/lunr.js"></script> <script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script> <script async src="../../search-index.js"></script> <!-- Matomo --> <script> var _paq = window._paq = window._paq || [];
  /* We explicitly disable cookie tracking to avoid privacy issues */
  _paq.push(['disableCookies']);  
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '11']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })(); </script> <!-- End Matomo Code --> </body> </html> 