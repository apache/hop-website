<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>The Hop SDK :: Apache Hop</title> <link rel="canonical" href="https://hop.apache.org/dev-manual/latest/sdk/hop-sdk.html"> <meta name="description" content="First, we need to initialize the Hop API. This means we load configuration details, search for and load plugins and so on."> <meta name="generator" content="Antora 3.0.1"> <link rel="stylesheet" href="../../../_/css/site-e3cda5e4ab.css"> <meta property="og:title" content="The Hop SDK :: Apache Hop"> <meta property="og:description" content="First, we need to initialize the Hop API. This means we load configuration details, search for and load plugins and so on."> <meta property="og:type" content="article"> <meta property="og:url" content="https://hop.apache.org/dev-manual/latest/sdk/hop-sdk.html"> <meta property="og:image" content="https://hop.apache.org/img/hop-logo.png"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../../.."><span>Apache Hop</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item mobile-heading" href="/../../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link mobile-heading" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../../manual/latest/getting-started/">Getting started</a> <a class="navbar-item" href="../../../manual/latest/">User manual</a> <a class="navbar-item" href="../../../tech-manual/latest/">Technical Documentation</a> <a class="navbar-item" href="../../../dev-manual/latest/">Developer Documentation</a> <a class="navbar-item" href="../../../docs/architecture/">Architecture</a> <a class="navbar-item" href="../../../docs/roadmap/">Roadmap</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link mobile-heading" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../../community/contributing/">Contributing</a> <a class="navbar-item" href="../../../community/tools/">Tools</a> <a class="navbar-item" href="../../../community/mailing-list/">Mailing Lists</a> <a class="navbar-item" href="../../../community/events/">Events and User Groups</a> <a class="navbar-item" href="../../../community/team/">Team</a> <a class="navbar-item" href="../../../community/support/">Support</a> <a class="navbar-item" href="../../../community/ethos/">Ethos</a> </div> </div> <a class="navbar-item mobile-heading" href="/../../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link mobile-heading" href="#">Apache</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event" target="_blank">Events</a> <a class="navbar-item" href="https://www.apache.org/licenses/" target="_blank">License</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks to our sponsors</a> <a class="navbar-item" href="https://www.apache.org/security/" target="_blank">Apache Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Become a sponsor</a> </div> </div> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-item search hide-for-print"> <div id="search-field" class="field"> <input id="search-input" type="text" placeholder="Search the docs"> </div> </div> <div class="navbar-tools"> <a href="https://twitter.com/ApacheHop" title="Follow us on Twitter" target="_blank"><svg focusable="false" height="30" width="30" viewBox="0 0 30 30" class="brand-icon"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.5 8.778c-.441.196-.916.328-1.414.388.509-.305.898-.787 1.083-1.362-.476.282-1.003.487-1.564.597-.448-.479-1.089-.778-1.796-.778-1.59 0-2.758 1.483-2.399 3.023-2.045-.103-3.86-1.083-5.074-2.572-.645 1.106-.334 2.554.762 3.287-.403-.013-.782-.124-1.114-.308-.027 1.14.791 2.207 1.975 2.445-.346.094-.726.116-1.112.042.313.978 1.224 1.689 2.3 1.709-1.037.812-2.34 1.175-3.647 1.021 1.09.699 2.383 1.106 3.773 1.106 4.572 0 7.154-3.861 6.998-7.324.482-.346.899-.78 1.229-1.274z"/></svg></a> <a href="https://www.linkedin.com/company/apachehop/" title="Follow us on LinkedIn" target="_blank"><svg focusable="false" height="30" width="30" viewBox="0 0 30 30" class="brand-icon"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a> <a href="https://www.youtube.com/channel/UCGlcYslwe03Y2zbZ1W6DAGA" title="Subscribe to our YouTube channel" target="_blank"><svg focusable="false" height="30" width="30" viewBox="0 0 30 30" class="brand-icon"><path fill-rule="evenodd" d="M4.652 0h1.44l.988 3.702.916-3.702h1.454l-1.665 5.505v3.757h-1.431v-3.757l-1.702-5.505zm6.594 2.373c-1.119 0-1.861.74-1.861 1.835v3.349c0 1.204.629 1.831 1.861 1.831 1.022 0 1.826-.683 1.826-1.831v-3.349c0-1.069-.797-1.835-1.826-1.835zm.531 5.127c0 .372-.19.646-.532.646-.351 0-.554-.287-.554-.646v-3.179c0-.374.172-.651.529-.651.39 0 .557.269.557.651v3.179zm4.729-5.07v5.186c-.155.194-.5.512-.747.512-.271 0-.338-.186-.338-.46v-5.238h-1.27v5.71c0 .675.206 1.22.887 1.22.384 0 .918-.2 1.468-.853v.754h1.27v-6.831h-1.27zm2.203 13.858c-.448 0-.541.315-.541.763v.659h1.069v-.66c.001-.44-.092-.762-.528-.762zm-4.703.04c-.084.043-.167.109-.25.198v4.055c.099.106.194.182.287.229.197.1.485.107.619-.067.07-.092.105-.241.105-.449v-3.359c0-.22-.043-.386-.129-.5-.147-.193-.42-.214-.632-.107zm4.827-5.195c-2.604-.177-11.066-.177-13.666 0-2.814.192-3.146 1.892-3.167 6.367.021 4.467.35 6.175 3.167 6.367 2.6.177 11.062.177 13.666 0 2.814-.192 3.146-1.893 3.167-6.367-.021-4.467-.35-6.175-3.167-6.367zm-12.324 10.686h-1.363v-7.54h-1.41v-1.28h4.182v1.28h-1.41v7.54zm4.846 0h-1.21v-.718c-.223.265-.455.467-.696.605-.652.374-1.547.365-1.547-.955v-5.438h1.209v4.988c0 .262.063.438.322.438.236 0 .564-.303.711-.487v-4.939h1.21v6.506zm4.657-1.348c0 .805-.301 1.431-1.106 1.431-.443 0-.812-.162-1.149-.583v.5h-1.221v-8.82h1.221v2.84c.273-.333.644-.608 1.076-.608.886 0 1.18.749 1.18 1.631v3.609zm4.471-1.752h-2.314v1.228c0 .488.042.91.528.91.511 0 .541-.344.541-.91v-.452h1.245v.489c0 1.253-.538 2.013-1.813 2.013-1.155 0-1.746-.842-1.746-2.013v-2.921c0-1.129.746-1.914 1.837-1.914 1.161 0 1.721.738 1.721 1.914v1.656z"></path></svg></a> <a href="https://github.com/apache/hop/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon" viewBox="0 0 22 22"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <div class="nav-container" data-component="dev-manual" data-version="2.8.0"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="../index.html">Development Documentation</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../getting-started.html">Getting started</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../upgrading-to-20.html">Plugins Upgrades to 2.x</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../porting-kettle-plugins.html">Porting Kettle plugins</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../metadata-plugins.html">Metadata plugins</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../setup-dev-environment.html">Setting up your development environment</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../integration-testing.html">Integration testing</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../internationalisation.html">Internationalisation (i18n)</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../plugin-development.html">Plugins Development</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../plugin-samples.html">Plugins Samples</a> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../svg-files.html">SVG Files</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../start-your-own-plugin.html">Creating your own plugin</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../apache-release/index.html">Apache Release Process</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../apache-release/creating-a-release.html">Creating a Release</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../apache-release/promoting-a-release.html">Promoting a Release</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../apache-release/checking-a-release.html">Checking a Release</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../hopweb/index.html">Hop Web</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../hopweb/developer-guide.html">Hop Web Developer Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../hopweb/hopweb-antipatterns.html">Hop Web Antipatterns</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="index.html">SDK</a> <ul class="nav-list"> <li class="nav-item is-current-page" data-depth="2"> <a class="nav-link" href="hop-sdk.html">The Hop SDK</a> </li> </ul> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Development Documentation</span> <span class="version">2.8.0</span> </div> <ul class="components"> <li class="component is-current"> <a class="title" href="../../latest/index.html">Development Documentation</a> <ul class="versions"> <li class="version"> <a href="../../next/index.html">2.17.0</a> </li> <li class="version"> <a href="../../2.16.0/index.html">2.16.0</a> </li> <li class="version is-latest"> <a href="../../latest/index.html">2.15.0</a> </li> <li class="version"> <a href="../../2.14.0/index.html">2.14.0</a> </li> <li class="version"> <a href="../../2.13.0/index.html">2.13.0</a> </li> <li class="version"> <a href="../../2.12.0/index.html">2.12.0</a> </li> <li class="version"> <a href="../../2.11.0/index.html">2.11.0</a> </li> <li class="version"> <a href="../../2.10.0/index.html">2.10.0</a> </li> <li class="version"> <a href="../../2.9.0/index.html">2.9.0</a> </li> <li class="version is-current"> <a href="../index.html">2.8.0</a> </li> <li class="version"> <a href="../../2.7.0/index.html">2.7.0</a> </li> <li class="version"> <a href="../../2.6.0/index.html">2.6.0</a> </li> <li class="version"> <a href="../../2.5.0/index.html">2.5.0</a> </li> </ul> </li> <li class="component"> <a class="title" href="../../../tech-manual/latest/index.html">Technical Documentation</a> <ul class="versions"> <li class="version"> <a href="../../../tech-manual/next/index.html">2.17.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.16.0/index.html">2.16.0</a> </li> <li class="version is-latest"> <a href="../../../tech-manual/latest/index.html">2.15.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.14.0/index.html">2.14.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.13.0/index.html">2.13.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.12.0/index.html">2.12.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.11.0/index.html">2.11.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.10.0/index.html">2.10.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.9.0/index.html">2.9.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.8.0/index.html">2.8.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.7.0/index.html">2.7.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.6.0/index.html">2.6.0</a> </li> <li class="version"> <a href="../../../tech-manual/2.5.0/index.html">2.5.0</a> </li> </ul> </li> <li class="component"> <a class="title" href="../../../manual/latest/index.html">User manual</a> <ul class="versions"> <li class="version"> <a href="../../../manual/next/index.html">2.17.0 (pre-release)</a> </li> <li class="version"> <a href="../../../manual/2.16.0/index.html">2.16.0 (pre-release)</a> </li> <li class="version is-latest"> <a href="../../../manual/latest/index.html">2.15.0</a> </li> <li class="version"> <a href="../../../manual/2.14.0/index.html">2.14.0</a> </li> <li class="version"> <a href="../../../manual/2.13.0/index.html">2.13.0</a> </li> <li class="version"> <a href="../../../manual/2.12.0/index.html">2.12.0</a> </li> <li class="version"> <a href="../../../manual/2.11.0/index.html">2.11.0</a> </li> <li class="version"> <a href="../../../manual/2.10.0/index.html">2.10.0</a> </li> <li class="version"> <a href="../../../manual/2.9.0/index.html">2.9.0</a> </li> <li class="version"> <a href="../../../manual/2.8.0/index.html">2.8.0</a> </li> <li class="version"> <a href="../../../manual/2.7.0/index.html">2.7.0</a> </li> <li class="version"> <a href="../../../manual/2.6.0/index.html">2.6.0</a> </li> <li class="version"> <a href="../../../manual/2.5.0/index.html">2.5.0</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main class="article"> <nav class="toolbar"> <button class="nav-toggle"></button> <a href="../../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="../index.html">Development Documentation</a></li> <li><a href="index.html">SDK</a></li> <li><a href="hop-sdk.html">The Hop SDK</a></li> </ul> </nav> <div class="page-versions"> <button class="version-menu-toggle" title="Show other versions of page">2.8.0</button> <div class="version-menu"> <a class="version" href="../../next/sdk/hop-sdk.html">2.17.0</a> <a class="version" href="../../2.16.0/sdk/hop-sdk.html">2.16.0</a> <a class="version" href="../../latest/sdk/hop-sdk.html">2.15.0</a> <a class="version" href="../../2.14.0/sdk/hop-sdk.html">2.14.0</a> <a class="version" href="../../2.13.0/sdk/hop-sdk.html">2.13.0</a> <a class="version" href="../../2.12.0/sdk/hop-sdk.html">2.12.0</a> <a class="version" href="../../2.11.0/sdk/hop-sdk.html">2.11.0</a> <a class="version" href="../../2.10.0/sdk/hop-sdk.html">2.10.0</a> <a class="version" href="../../2.9.0/sdk/hop-sdk.html">2.9.0</a> <a class="version is-current" href="hop-sdk.html">2.8.0</a> <a class="version" href="../../2.7.0/sdk/hop-sdk.html">2.7.0</a> <a class="version" href="../../2.6.0/sdk/hop-sdk.html">2.6.0</a> <a class="version" href="../../2.5.0/sdk/hop-sdk.html">2.5.0</a> </div> </div> <div class="edit-this-page"><a href="https://github.com/apache/hop/edit/release/2.8.0/docs/hop-dev-manual/modules/ROOT/pages/sdk/hop-sdk.adoc">Edit this Page</a></div> </nav> <div class="content"> <aside class="toc sidebar" data-title="Contents" data-levels="2"> <div class="toc-menu"></div> </aside> <article class="doc"> <h1 class="page">The Hop SDK</h1> <div id="toc" class="toc"> <div id="toctitle">Table of Contents</div> <ul class="sectlevel1"> <li><a href="#_initializing">Initializing</a></li> <li><a href="#_plugin_folders">Plugin folders</a></li> <li><a href="#_hop_metadata_providers">Hop Metadata Providers</a></li> <li><a href="#_variables">Variables</a></li> <li><a href="#_pipelines">Pipelines</a> <ul class="sectlevel2"> <li><a href="#_loading_pipeline_metadata_from_a_file">Loading pipeline metadata from a file</a></li> <li><a href="#_loading_pipeline_metadata_from_an_input_stream">Loading pipeline metadata from an input stream</a></li> <li><a href="#_construct_pipeline_metadata_with_the_hop_api">Construct pipeline metadata with the Hop API</a></li> <li><a href="#_pipeline_execution">Pipeline execution</a></li> <li><a href="#_injecting_data_into_a_pipeline">Injecting data into a pipeline</a></li> <li><a href="#_retrieving_rows_from_a_pipeline">Retrieving rows from a pipeline</a></li> </ul> </li> <li><a href="#_workflows">Workflows</a> <ul class="sectlevel2"> <li><a href="#_loading_workflow_metadata_from_a_file">Loading workflow metadata from a file</a></li> <li><a href="#_loading_workflow_metadata_from_an_input_stream">Loading workflow metadata from an input stream</a></li> <li><a href="#_construct_workflow_metadata_with_the_hop_api">Construct workflow metadata with the Hop API</a></li> <li><a href="#_workflow_execution">Workflow execution</a></li> </ul> </li> <li><a href="#_logging">Logging</a> <ul class="sectlevel2"> <li><a href="#_logging_registry">Logging Registry</a></li> </ul> </li> <li><a href="#_log_lines">Log lines</a></li> </ul> </div> <div class="sect1"> <h2 id="_initializing"><a class="anchor" href="#_initializing"></a>Initializing</h2> <div class="sectionbody"> <div class="paragraph"> <p>First, we need to initialize the Hop API. This means we load configuration details, search for and load plugins and so on.</p> </div> <div class="paragraph"> <p>You can do this with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">HopEnvironment.init();</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_plugin_folders"><a class="anchor" href="#_plugin_folders"></a>Plugin folders</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you need to load plugins from different folders you can set system property <code>HOP_PLUGIN_BASE_FOLDERS</code>. The default value is <code>plugins</code>, the relative path to the installation folder plugins folder. You can add your own plugin folders with commas (<code>,</code>) separating the values.</p> </div> </div> </div> <div class="sect1"> <h2 id="_hop_metadata_providers"><a class="anchor" href="#_hop_metadata_providers"></a>Hop Metadata Providers</h2> <div class="sectionbody"> <div class="paragraph"> <p>Shared metadata in Hop is handled by a HopMetadataProvider. When using the Hop GUI you store it in a project in the <code><code>metadata/</code></code> folder. In that case you can point to such a folder with class <code><code>JsonMetadataProvider</code></code>. Note that you can serialize such a metadata collection into a single JSON string using <code><code>SerializableMetadataProvider</code></code>. This can be used to send metadata to remote servers and locations.</p> </div> <div class="paragraph"> <p>When you have a provider you can ask it to give you a serializer with which you can add and retrieve all sorts of metadata objects.</p> </div> </div> </div> <div class="sect1"> <h2 id="_variables"><a class="anchor" href="#_variables"></a>Variables</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you want to work with variables in your pipelines and workflows it makes sense to create a top level IVariables object. The easiest way to do this is with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">IVariables variables = Variables.getADefaultVariableSpace();</code></pre> </div> </div> <div class="paragraph"> <p>This method also takes into account variables which are configured in hop-config.json (if that file can be found);</p> </div> </div> </div> <div class="sect1"> <h2 id="_pipelines"><a class="anchor" href="#_pipelines"></a>Pipelines</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="_loading_pipeline_metadata_from_a_file"><a class="anchor" href="#_loading_pipeline_metadata_from_a_file"></a>Loading pipeline metadata from a file</h3> <div class="paragraph"> <p>You can get the pipeline metadata from a <code>.hpl</code> XML file using:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PipelineMeta pipelineMeta = new PipelineMeta(
  "path-to-your-filename.hpl",   // The filename
  metadataProvider,             // See above
  true,                        // set internal variables
  variables                   // see above
);</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_loading_pipeline_metadata_from_an_input_stream"><a class="anchor" href="#_loading_pipeline_metadata_from_an_input_stream"></a>Loading pipeline metadata from an input stream</h3> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PipelineMeta pipelineMeta = new PipelineMeta(
  inputStream,         // The stream to load from
  metadataProvider,   // See above
  true,              // set internal variables
  variables         // see above
);</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_construct_pipeline_metadata_with_the_hop_api"><a class="anchor" href="#_construct_pipeline_metadata_with_the_hop_api"></a>Construct pipeline metadata with the Hop API</h3> <div class="paragraph"> <p>Obviously you can start with an empty pipeline and add the transforms, hops you like:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PipelineMeta pipelineMeta = new PipelineMeta();

// Generate 1M empty rows
//
RowGeneratorMeta rowGeneratorMeta = new RowGeneratorMeta();
rowGeneratorMeta.setRowLimit("1000000");

TransformMeta rowGenerator = new TransformMeta("1M", rowGeneratorMeta);
rowGenerator.setLocation(50, 50);
pipelineMeta.addTransform(rowGenerator);

// Just a dummy placeholder for testing
//
DummyMeta dummyMeta = new DummyMeta();
TransformMeta dummy = new TransformMeta("Output", dummyMeta);
dummy.setLocation(250, 50);
pipelineMeta.addTransform(dummy);

// Add a hop between both
//
PipelineHopMeta generatorDummyHop = new PipelineHopMeta(rowGenerator, dummy);
pipelineMeta.addPipelineHop(generatorDummyHop);</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_pipeline_execution"><a class="anchor" href="#_pipeline_execution"></a>Pipeline execution</h3> <div class="paragraph"> <p>The way a pipeline is executed depends on the run configuration you specify. To make it easy to get the engine we created a factory for you:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">IPipelineEngine pipelineEngine = PipelineEngineFactory.createPipelineEngine(
  variables,           // see above
  "local",            // The name of the run configuration defined in the metadata
  metadataProvider,  // The metadata provider to resolve the run configuration details
  pipelineMeta      // The pipeline metadata
);

// We can now simply execute this engine...
//
pipelineEngine.execute();

// This execution runs in the background but we can wait for it to finish:
//
pipelineEngine.waitUnitlFinished();

// When it's done we can evalute the results:
//
Result result = pipelineEngine.getResult();</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_injecting_data_into_a_pipeline"><a class="anchor" href="#_injecting_data_into_a_pipeline"></a>Injecting data into a pipeline</h3> <div class="paragraph"> <p>You can only inject data into a <code>LocalPipelineEngine</code>. Do so using the <code>addRowProducer</code>. Call this method after your run <code>prepareExecution()</code> so that the row producer can be attached to the correct transform copy. After starting the execution of the pipeline you can then use the <code>RowProducer</code> to put rows into the pipeline using <code>putRow()</code>. Make sure to call <code>setFinished()</code> when you&#8217;re done feeding rows into the pipeline.</p> </div> </div> <div class="sect2"> <h3 id="_retrieving_rows_from_a_pipeline"><a class="anchor" href="#_retrieving_rows_from_a_pipeline"></a>Retrieving rows from a pipeline</h3> <div class="paragraph"> <p>This again is only supported on the local pipeline engine <code>LocalPipelineEngine</code>. After <code>prepareExecution()</code> you can add row listeners to the various transforms:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ITransform transform = localPipeline.getTransform("transform-name", 0);
transform.addRowListener(new RowAdapter() {
  void rowWrittenEvent( IRowMeta rowMeta, Object[] row ) throws HopTransformException {
    // A row was written during execution
  }
});</code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_workflows"><a class="anchor" href="#_workflows"></a>Workflows</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="_loading_workflow_metadata_from_a_file"><a class="anchor" href="#_loading_workflow_metadata_from_a_file"></a>Loading workflow metadata from a file</h3> <div class="paragraph"> <p>You can get the workflow metadata from a <code>.hwf</code> XML file using:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">WorkflowMeta workflowMeta = new WorkflowMeta(
  variables,                     // see above
  "path-to-your-filename.hwf",  // The filename
  metadataProvider             // See above
);</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_loading_workflow_metadata_from_an_input_stream"><a class="anchor" href="#_loading_workflow_metadata_from_an_input_stream"></a>Loading workflow metadata from an input stream</h3> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">WorkflowMeta workflowMeta = new WorkflowMeta(
  inputStream,                   // the inputstream to read the metadata from
  metadataProvider,             // See above
  variables                    // see above
);</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_construct_workflow_metadata_with_the_hop_api"><a class="anchor" href="#_construct_workflow_metadata_with_the_hop_api"></a>Construct workflow metadata with the Hop API</h3> <div class="paragraph"> <p>You typically start with an empty workflow and then add the actions and hops you want:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">WorkflowMeta workflowMeta = new WorkflowMeta();

// Add the Start action
//
ActionStart actionStart = new ActionStart("Start");
ActionMeta startMeta = new ActionMeta(actionStart);
startMeta.setLocation(50, 50);
workflowMeta.addAction(startMeta);

// Just a dummy placeholder for testing
//
ActionDummy actionDummy = new ActionDummy("Dummy");
ActionMeta dummyMeta = new ActionMeta(dummyMeta);
dummyMeta.setLocation(250, 50);
workflowMeta.addAction(dummyMeta);

// Add a hop between both
//
WorkflowHopMeta startDummyHop = new WorkflowHopMeta(startMeta, dummyMeta);
workflowMeta.addWorkflowHop(generatorDummyHop);</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_workflow_execution"><a class="anchor" href="#_workflow_execution"></a>Workflow execution</h3> <div class="paragraph"> <p>Workflow engines are also plugins. Which plugin is used to execute your workflow metadata is specified in a <a href="../../../manual/latest/workflow/workflow-run-configurations/workflow-run-configurations.html" class="xref page">Workflow Run Configuration</a>.</p> </div> <div class="paragraph"> <p>To make it easy to get the engine we created a factory for you:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">IWorkflowEngine workflowEngine = WorkflowEngineFactory.createWorkflowEngine(
  variables,           // see above
  "local",            // The name of the run configuration defined in the metadata
  metadataProvider,  // The metadata provider to resolve the run configuration details
  workflowMeta,     // The workflow metadata
  parentLogging    // The parent logging object
);

// We can now execute this engine...
// This execution does not run in the background.
// When you get the result, the execution has completed.
//
Result result = workflowEngine.startExecution();</code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_logging"><a class="anchor" href="#_logging"></a>Logging</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="_logging_registry"><a class="anchor" href="#_logging_registry"></a>Logging Registry</h3> <div class="paragraph"> <p>Everything that executes something worth our time is registering its own Log Channel in the hop <code>LoggingRegistry</code>. Every log channel gets its own unique ID with which we can see where a log line came from. You can access the Logging Registry using <code>LoggingRegistry.getInstance()</code>. It contains the execution hierarchy of Hop work. For example if you have the log channel ID of a parent you can see all its children with <code>getLogChannelChildren()</code> which will give you all the IDs of the child log channels. What we get is in effect the execution lineage.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_log_lines"><a class="anchor" href="#_log_lines"></a>Log lines</h2> <div class="sectionbody"> <div class="paragraph"> <p>Whenever a log channel logs something using <code>logBasic()</code> or other logging variants, that text along with some basic information is kept in the Hop Log Store. You can get that one with <code>HopLogStore.getInstance()</code>. The logging lines are kept as logging events or class <code>HopLoggingEvent</code> in a logging buffer <code>LoggingBuffer</code> which you can access using <code>HopLogStore.getInstance().getAppender()</code>.</p> </div> <div class="paragraph"> <p>If you want to grab the logging output of a pipeline, transform, workflow, action, &#8230;&#8203; you need to start with the ID of the log channel associated with that runtime object. Usually you can do <code>getLogChannel()</code> and then get the ID or the shortcut: <code>getLogChannelId()</code>.</p> </div> <div class="paragraph"> <p>If you want to get detailed information about every logging event you can ask for a list with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">int lastNr = HopLogStore.getLastBufferLineNr();
List&lt;HopLoggingEvent&gt; events = getLogBufferFromTo( logChannelId, false, 0, lastNr);</code></pre> </div> </div> <div class="paragraph"> <p>The details allow you to see which line was an error, what the timestamp was, to which executable it belonged and so on.</p> </div> <div class="paragraph"> <p>If you just want to see the flattened logging text you can ask the appender for the information:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StringBuffer loggingText = HopLogStore.getAppender().getBuffer(logChannelId);</code></pre> </div> </div> </div> </div> </article> </div> </main> </div> <footer> <div class="footer"> <dl> <dt>Overview</dt> <dd><a href="../../../download/">Download</a></dd> <dd><a href="../../../manual/latest/">Getting started</a></dd> </dl> <dl> <dt>Community</dt> <dd><a target="_blank" href="https://github.com/apache/hop/issues">GitHub Issues</a></dd> <dd><a target="_blank" href="https://github.com/apache/hop/discussions">GitHub Discussions</a></dd> <dd><a target="_blank" href="../../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> </dl> <p> &copy; 2019-2025 The Hop Team.<br> All marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../../_/js/site-8bbb7a5250.js"></script> <script async src="../../../_/js/vendor/highlight-a243a7d07e.js"></script> <script async src="../../../_/js/vendor/tabs-523d9bca0f.js"></script> <script src="../../../_/js/vendor/lunr.js"></script> <script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script> <script async src="../../../search-index.js"></script> <!-- Matomo --> <script> var _paq = window._paq = window._paq || [];
  /* We explicitly disable cookie tracking to avoid privacy issues */
  _paq.push(['disableCookies']);  
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '11']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })(); </script> <!-- End Matomo Code --> </body> </html> 